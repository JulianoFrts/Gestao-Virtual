import{N as S,u as U,a as F,b as H,c as $,i as G,d as I,C as m,F as f,U as v,j as e,L as O,B as Q,A as _,e as z}from"./index-D951x4H-.js";import{C as r,a as i,b as x,c as h,d as p}from"./card-BTHGlYFz.js";import{P as y}from"./progress-CJuBekOD.js";import{u as J}from"./useTimeRecords-RqrN7uRd.js";import{u as K}from"./useDailyReports-BR6lQ8Fm.js";import{C as M}from"./calendar-B3GVMfO3.js";import{T as V}from"./trending-up-BwuTo0m4.js";import{C as W}from"./circle-alert-BlgUQYiE.js";function ie(){var N;S();const{profile:l,user:c}=U(),b=F(),{employees:C,isLoading:w}=H(),{teams:R,isLoading:A}=$(),{records:g,getTodayRecords:u,isLoading:T}=J(),{getTodayReports:j,isLoading:D}=K(),L=w||A||T||D,E=(l==null?void 0:l.fullName)||((N=c==null?void 0:c.email)==null?void 0:N.split("@")[0])||"UsuÃ¡rio",a=(C||[]).filter(s=>s.isActive).length,t=(R||[]).filter(s=>s.isActive).length,o=u?u().length:0,n=j?j().length:0,k=[{title:"FuncionÃ¡rios Ativos",value:a,icon:v,color:"text-primary",bgColor:"bg-primary/10"},{title:"Equipes Ativas",value:t,icon:V,color:"text-success",bgColor:"bg-success/10"},{title:"Registros Hoje",value:o,icon:m,color:"text-accent",bgColor:"bg-accent/10"},{title:"RelatÃ³rios Hoje",value:n,icon:f,color:"text-secondary",bgColor:"bg-secondary/10"}],P=[{label:"Registrar Ponto",path:"/time-clock",icon:m},{label:"Novo RelatÃ³rio",path:"/daily-report",icon:f},{label:"Gerenciar Equipes",path:"/teams",icon:v}],q=G.value||I("system.is_corporate"),B=P.filter(s=>s.path==="/daily-report"?q:!0);return L?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(O,{className:"w-8 h-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold font-display",children:["OlÃ¡, ",E.split(" ")[0],"! ðŸ‘‹"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Aqui estÃ¡ o resumo do seu dia"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(M,{className:"w-4 h-4"}),new Date().toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})]})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:k.map(s=>e.jsx(r,{className:"glass-card hover-lift hover:shadow-strong transition-all",children:e.jsx(i,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 sm:p-3 rounded-xl ${s.bgColor}`,children:e.jsx(s.icon,{className:`w-5 h-5 sm:w-6 sm:h-6 ${s.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl sm:text-3xl font-bold",children:s.value}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:s.title})]})]})})},s.title))}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs(r,{className:"glass-card lg:col-span-1",children:[e.jsxs(x,{children:[e.jsx(h,{className:"text-lg",children:"AÃ§Ãµes RÃ¡pidas"}),e.jsx(p,{children:"Acesse as funÃ§Ãµes mais usadas"})]}),e.jsx(i,{className:"space-y-3",children:B.map(s=>e.jsxs(Q,{variant:"outline",className:"w-full justify-between h-12 hover:bg-primary/10 hover:border-primary/50 hover:text-primary transition-all shadow-sm group",onClick:()=>b(s.path),children:[e.jsxs("span",{className:"flex items-center gap-3",children:[e.jsx(s.icon,{className:"w-5 h-5 text-primary"}),s.label]}),e.jsx(_,{className:"w-4 h-4 text-muted-foreground"})]},s.path))})]}),e.jsxs(r,{className:"glass-card lg:col-span-2",children:[e.jsxs(x,{children:[e.jsx(h,{className:"text-lg",children:"Atividade Recente"}),e.jsx(p,{children:"Ãšltimos registros e aÃ§Ãµes"})]}),e.jsx(i,{children:g.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(m,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Nenhuma atividade registrada ainda"}),e.jsx("p",{className:"text-sm mt-1",children:"Comece registrando um ponto ou relatÃ³rio"})]}):e.jsx("div",{className:"space-y-4",children:g.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:`p-2 rounded-full ${s.recordType==="entry"?"bg-success/20":"bg-primary/20"}`,children:s.recordType==="entry"?e.jsx(z,{className:"w-4 h-4 text-success"}):e.jsx(W,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.employeeName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.recordType==="entry"?"Entrada":"SaÃ­da"," -"," ",(()=>{try{const d=new Date(s.recordedAt);return isNaN(d.getTime())?"Data InvÃ¡lida":d.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}catch{return"Erro data"}})()]})]})]},s.id))})})]})]}),e.jsxs(r,{className:"glass-card",children:[e.jsxs(x,{children:[e.jsx(h,{className:"text-lg",children:"Progresso do Dia"}),e.jsx(p,{children:"Acompanhe as metas diÃ¡rias"})]}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"Registros de Ponto"}),e.jsxs("span",{className:"text-muted-foreground",children:[o," / ",a*2," esperados"]})]}),e.jsx(y,{value:a>0?o/(a*2)*100:0,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{children:"RelatÃ³rios DiÃ¡rios"}),e.jsxs("span",{className:"text-muted-foreground",children:[n," / ",t," equipes"]})]}),e.jsx(y,{value:t>0?n/t*100:0,className:"h-2"})]})]})]})]})}export{ie as default};
